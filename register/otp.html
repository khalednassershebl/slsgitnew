<!DOCTYPE html>
<html lang="ar">

<head>
    <!-- Main Meta Tags -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Important Meta Tags -->
    <meta name="author" content="https://www.menamedia.io" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Library Styles -->
    <link rel="stylesheet" href="../assets/scss/libs/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/scss/libs/animate.css">
    <!-- Main Style -->
    <link rel="stylesheet" href="../main.css" />

    <!-- Page Title & Icon -->
    <title>OTP</title>
    <link rel="shortcut icon" href="../assets/images/icon.png" />

</head>

<body>


    <div class="register" style="background-image: url(../assets/images/login.png);">
        <div class="register-overlay"></div>

        <div class="row align-items-center">

            <div class="col-xl-12 col-lg-12 order-1 order-lg-1">
                <div class="form-container form-container-otp">
                    <div class="form-card">
                        <div class="form-box-title">أدخل رمز OTP</div>
                        <p class="form-box-text">تم ارسال الكود الى هاتف ينتهى بـ<span>996********</span></p>


                        <form action="" class="form">

                            <div class="otp-input-fields">
                                <input type="number" class="otp__digit otp__field__1" id="foucs">
                                <input type="number" class="otp__digit otp__field__2">
                                <input type="number" class="otp__digit otp__field__3">
                                <input type="number" class="otp__digit otp__field__4">
                                <input type="number" class="otp__digit otp__field__5">
                                <input type="number" class="otp__digit otp__field__6">
                            </div>

                            <button type="submit" class="create-account-btn">تأكيد الكود</button>

                        </form>


                        <span class="login-link"><a href="../register/login.html">إعادة ارسال الكود</a></span>
                    </div>
                </div>
            </div>

        </div>

    </div>


    <!-- Main Scripts -->
    <script src="../assets/js/libs/jquery-3.6.3.min.js"></script>
    <script src="../assets/js/libs/bootstrap.min.js"></script>
    <script src="../assets/js/libs/popper.js"></script>
    <script src="../main.js"></script>
    <!-- Addition Scripts -->

    <script>
        $(document).ready(function () {
            $("#foucs").focus()
        });
        var otp_inputs = document.querySelectorAll(".otp__digit")
        var mykey = "0123456789".split("")
        otp_inputs.forEach((_) => {
            _.addEventListener("keyup", handle_next_input)
        })
        function handle_next_input(event) {
            let current = event.target
            let index = parseInt(current.classList[1].split("__")[2])
            current.value = event.key

            if (event.keyCode == 8 && index > 1) {
                current.previousElementSibling.focus()
            }
            if (index < 6 && mykey.indexOf("" + event.key + "") != -1) {
                var next = current.nextElementSibling;
                next.focus()
            }
            var _finalKey = ""
            for (let { value } of otp_inputs) {
                _finalKey += value
            }
            if (_finalKey.length == 6) {
                document.querySelector("#_otp").classList.replace("_notok", "_ok")
                document.querySelector("#_otp").innerText = _finalKey
            } else {
                document.querySelector("#_otp").classList.replace("_ok", "_notok")
                document.querySelector("#_otp").innerText = _finalKey
            }
        }
    </script>

</body>

</html>